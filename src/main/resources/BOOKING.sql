-- MySQL Script generated by MySQL Workbench
-- Thu 16 Mar 2017 00:04:23 EET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema BOOKING
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema BOOKING
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `BOOKING` DEFAULT CHARACTER SET utf8 ;
USE `BOOKING` ;

-- -----------------------------------------------------
-- Table `BOOKING`.`IMAGE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`IMAGE` (
  `ID` INT NOT NULL,
  `DATA` LONGBLOB NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `BOOKING`.`USER`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`USER` (
  `ID` INT NOT NULL,
  `FIRST_NAME` VARCHAR(50) NULL,
  `LAST_NAME` VARCHAR(50) NULL,
  `EMAIL` VARCHAR(50) NULL,
  `PASSWORD` VARCHAR(50) NULL,
  `IMAGE_ID` INT NULL,
  `CREATED_DATE` DATETIME NULL,
  `UPDATED_DATE` DATETIME NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  `STATUS` TINYINT(1) NULL,
  `VERIFICATION_KEY` VARCHAR(50) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_USER_1_idx` ON `BOOKING`.`USER` (`IMAGE_ID` ASC);

CREATE UNIQUE INDEX `EMAIL_UNIQUE` ON `BOOKING`.`USER` (`EMAIL` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`ADDRESS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`ADDRESS` (
  `ID` INT NOT NULL,
  `COUNTRY` VARCHAR(50) NULL,
  `CITY` VARCHAR(50) NULL,
  `REGION` VARCHAR(50) NULL,
  `STREET` VARCHAR(50) NULL,
  `APPARTMENT` VARCHAR(50) NULL,
  `LATITUDE` VARCHAR(50) NULL,
  `LONGITUDE` VARCHAR(50) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `BOOKING`.`ANNOUNCEMENT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`ANNOUNCEMENT` (
  `ID` INT NOT NULL,
  `HIDDEN` TINYINT(1) NULL,
  `USER_ID` INT NULL,
  `ADDRESS_ID` INT NULL,
  `ROOM` INT NULL,
  `LIVING_PLACES` INT NULL,
  `TITLE` VARCHAR(50) NULL,
  `SHORT_DESCRIPTION` VARCHAR(50) NULL,
  `CREATED_DATE` DATETIME NULL,
  `UPDATED_DATE` DATETIME NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_ANNOUNSMENT_USER_idx` ON `BOOKING`.`ANNOUNCEMENT` (`USER_ID` ASC);

CREATE INDEX `fk_ANNOUNSMENT_ADDRESS_idx` ON `BOOKING`.`ANNOUNCEMENT` (`ADDRESS_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`ANNOUNCEMENT_IMAGE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`ANNOUNCEMENT_IMAGE` (
  `ID` INT NOT NULL,
  `TITLE` VARCHAR(50) NULL,
  `ANNOUNCEMENT_ID` INT NULL,
  `IMAGE_ID` INT NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_ANNOUNSMENT_IMAGE_IMAGE_idx` ON `BOOKING`.`ANNOUNCEMENT_IMAGE` (`IMAGE_ID` ASC);

CREATE INDEX `fk_ANNOUNSMENT_IMAGE_ANNOUNSMENT_idx` ON `BOOKING`.`ANNOUNCEMENT_IMAGE` (`ANNOUNCEMENT_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`USER_TELEPHONE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`USER_TELEPHONE` (
  `ID` INT NOT NULL,
  `USER_ID` INT NULL,
  `TELEPHONE` VARCHAR(50) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_USER_TELEPHONE_1_idx` ON `BOOKING`.`USER_TELEPHONE` (`USER_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`USER_EMAIL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`USER_EMAIL` (
  `ID` INT NOT NULL,
  `USER_ID` INT NULL,
  `EMAIL` VARCHAR(50) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_USER_EMAIL_1_idx` ON `BOOKING`.`USER_EMAIL` (`USER_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`PRICE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`PRICE` (
  `ID` INT NOT NULL,
  `PRICE` DECIMAL NULL,
  `TYPE` VARCHAR(50) NULL,
  `ANNOUNCEMENT_ID` INT NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_PRICE_ANNOUNSMENT_idx` ON `BOOKING`.`PRICE` (`ANNOUNCEMENT_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`FAVORITE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`FAVORITE` (
  `ID` INT NOT NULL,
  `USER_ID` INT NULL,
  `ANNOUNCEMENT_ID` INT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_FAVOURITE_USER_idx` ON `BOOKING`.`FAVORITE` (`USER_ID` ASC);

CREATE INDEX `fk_FAVOURITE_ANNOUNSMENT_idx` ON `BOOKING`.`FAVORITE` (`ANNOUNCEMENT_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`FACILITY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`FACILITY` (
  `ID` INT NOT NULL,
  `TITLE` VARCHAR(50) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `BOOKING`.`ANNOUNCEMENT_FACILITY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`ANNOUNCEMENT_FACILITY` (
  `ID` INT NOT NULL,
  `ENABLED` TINYINT(1) NULL,
  `ANNOUNCEMENT_ID` INT NULL,
  `FACILITY_ID` INT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_ANNOUNSMENT_FACILITY_ANNOUNSMENT_idx` ON `BOOKING`.`ANNOUNCEMENT_FACILITY` (`ANNOUNCEMENT_ID` ASC, `FACILITY_ID` ASC);

CREATE UNIQUE INDEX `ANNOUNCEMENT_FACILITY_idx` ON `BOOKING`.`ANNOUNCEMENT_FACILITY` (`FACILITY_ID` ASC, `ANNOUNCEMENT_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`COMMENT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`COMMENT` (
  `ID` INT NOT NULL,
  `TEXT` LONGTEXT NULL,
  `DATE` DATETIME NULL,
  `USER_ID` INT NULL,
  `ANNOUNCEMENT_ID` INT NULL,
  `CREATED_DATE` DATETIME NULL,
  `UPDATED_DATE` DATETIME NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_COMMENT_USER_idx` ON `BOOKING`.`COMMENT` (`USER_ID` ASC);

CREATE INDEX `fk_COMMENT_ANNOUNSMENT_idx` ON `BOOKING`.`COMMENT` (`ANNOUNCEMENT_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`BOOKING_REQUEST`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`BOOKING_REQUEST` (
  `ID` INT NOT NULL,
  `CHECK_IN` DATE NULL,
  `CHECK_OUT` DATE NULL,
  `USER_ID` INT NULL,
  `ANNOUNCEMENT_ID` INT NULL,
  `CREATED_DATE` DATETIME NULL,
  `UPDATED_DATE` DATETIME NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

CREATE INDEX `fk_BOOKING_REQUEST_USER_idx` ON `BOOKING`.`BOOKING_REQUEST` (`USER_ID` ASC);

CREATE INDEX `fk_BOOKING_REQUEST_ANNOUNSMENT_idx` ON `BOOKING`.`BOOKING_REQUEST` (`ANNOUNCEMENT_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`CONVERSATION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`CONVERSATION` (
  `ID` INT NOT NULL,
  `ANNOUNCEMENT_ID` INT NULL,
  `CREATED_DATE` DATETIME NULL,
  `UPDATED_DATE` DATETIME NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE INDEX `fk_CONVERSATION_ANNOUNSMENT_idx` ON `BOOKING`.`CONVERSATION` (`ANNOUNCEMENT_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`MESSAGE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`MESSAGE` (
  `ID` INT NOT NULL,
  `TEXT` LONGTEXT NULL,
  `RECEIVED` TINYINT(1) NULL,
  `SENDER_ID` INT NULL,
  `CONVERSATION_ID` INT NULL,
  `CREATED_DATE` DATETIME NULL,
  `UPDATED_DATE` DATETIME NULL,
  `ACTIVE` TINYINT(1) NULL DEFAULT 1,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE INDEX `fk_MESSAGE_USER_idx` ON `BOOKING`.`MESSAGE` (`SENDER_ID` ASC);

CREATE INDEX `fk_MESSAGE_CONVERSATION_idx` ON `BOOKING`.`MESSAGE` (`CONVERSATION_ID` ASC);


-- -----------------------------------------------------
-- Table `BOOKING`.`ATTENDER`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING`.`ATTENDER` (
  `ID` INT NOT NULL,
  `USER_ID` INT NULL,
  `CONVERSATION_ID` INT NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;

CREATE INDEX `fk_ATTENDER_USER_idx` ON `BOOKING`.`ATTENDER` (`USER_ID` ASC);

CREATE INDEX `fk_ATTENDER_CONVERSATION_idx` ON `BOOKING`.`ATTENDER` (`CONVERSATION_ID` ASC);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
